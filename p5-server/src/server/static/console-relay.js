!function(){"use strict";const e="__p5_server_serialization_:",n=[void 0,NaN,-1/0,1/0],t=new Object(null),r=window.onerror;function o(e){try{return JSON.stringify(e)}catch(n){if(n instanceof TypeError)return function(e,n){const t=new Set,r=new Map;return JSON.stringify(e,o),t.clear(),0===r.size?JSON.stringify(e,n):JSON.stringify({"$__p5_server:circular":e},i);function o(e,n){if(n&&("object"==typeof n||Array.isArray(n))){if(r.has(n))return;if(t.has(n))return void r.set(n,r.size);t.add(n)}return n}function i(e,o){if(o&&("object"==typeof o||Array.isArray(o))){if("$__p5_server:def"===e)return o;if(t.has(o))return{"$__p5_server:ref":r.get(o)};if(r.has(o))return t.add(o),{"$__p5_server:def":o}}return n?n(e,o):o}}(e);throw n}}window.onerror=function(e,n,t,o,i){return c("error",{type:"error",message:e,url:n,line:t,col:o,stack:i&&i.stack}),!!r&&r(e,n,t,o,i)},window.addEventListener("unhandledrejection",(e=>{const n=e.reason;c("error",{type:"unhandledRejection",message:n.message||String(n),stack:n.stack})})),Object.entries(console).forEach((([r,o])=>{t[r]=(...e)=>o.apply(console,e),console[r]=(...t)=>{const i=o.apply(console,t),s=t.map((e=>!e||"object"!=typeof e&&"function"!=typeof e||Array.isArray(e)||"function"!=typeof e.toString?void 0:e.toString())),a=(new Error).stack,d=a&&a.match(/\n(?:.+?@)?(.+?):(\d+):(\d+)\n/),u=d?{url:d[1],line:Number(d[2]),col:Number(d[3])}:{};return c("console",Object.assign({method:r,args:t.map(((t,r)=>function(t,r){return n.includes(r)?e+r:r}(0,t))),argStrings:s},u)),i}}));const i=new WebSocket("ws://"+window.location.host),s=[],a=Array.from(window.crypto.getRandomValues(new Uint32Array(2))).map((e=>e.toString(16))).join("-");function c(e,n){n.url=n.url||document.documentURI,n.clientId=a;const t=o([e,n]);1!==i.readyState||s.length?s.push(t):i.send(t)}i.onopen=()=>{for(;s.length;)i.send(s.shift())},c("connection",{type:"opened"}),document.addEventListener("visibilitychange",(()=>{c("document",{type:"visibilitychange",visibilityState:document.visibilityState})})),window.addEventListener("DOMContentLoaded",(()=>{c("window",{type:"DOMContentLoaded"})})),window.addEventListener("load",(()=>{c("window",{type:"load"})})),window.addEventListener("pagehide",(()=>{c("window",{type:"pagehide"})}),!1)}();
