!function(){"use strict";const e="__p5_server_serialization_:",n=[void 0,NaN,-1/0,1/0],t={},r=window.onerror;window.onerror=function(e,n,t,o,i){return a("error",{type:"error",message:e,url:n,line:t,col:o,stack:i&&i.stack}),!!r&&r(e,n,t,o,i)},window.addEventListener("unhandledrejection",(e=>{const n=e.reason;a("error",{type:"unhandledRejection",message:n.message||String(n),stack:n.stack})})),Object.entries(console).forEach((([r,o])=>{t[r]=(...e)=>o.apply(console,e),console[r]=(...t)=>{const i=o.apply(console,t);return a("console",{method:r,args:t.map(((t,r)=>function(t,r){return n.includes(r)?e+r:r}(0,t))),argStrings:t.map((e=>e&&"object"==typeof e&&"function"==typeof e.toString?e.toString():null))}),i}})),document.addEventListener("visibilitychange",(()=>{a("window",{type:"load",visibilityState:document.visibilityState})})),window.addEventListener("DOMContentLoaded",(()=>{a("window",{type:"DOMContentLoaded"})})),window.addEventListener("load",(()=>{a("window",{type:"load"})})),window.addEventListener("pagehide",(()=>{a("window",{type:"pagehide"})}),!1);const o=new WebSocket("ws://"+window.location.host),i=Array.from(crypto.getRandomValues(new Uint32Array(2))).map((e=>e.toString(16))).join("-"),s=[];function a(e,n){n.url=n.url||document.documentURI,n.clientId=i;const t=function(e){try{return JSON.stringify(e)}catch(n){if(n instanceof TypeError)return function(e,n){const t=new Set,r=new Map;return JSON.stringify(e,o),t.clear(),0===r.size?JSON.stringify(e,n):JSON.stringify({"$__p5_server:circular":e},i);function o(e,n){if(n&&("object"==typeof n||Array.isArray(n))){if(r.has(n))return;if(t.has(n))return void r.set(n,r.size);t.add(n)}return n}function i(e,o){if(o&&("object"==typeof o||Array.isArray(o))){if("$__p5_server:def"===e)return o;if(t.has(o))return{"$__p5_server:ref":r.get(o)};if(r.has(o))return t.add(o),{"$__p5_server:def":o}}return n?n(e,o):o}}(e);throw n}}([e,n]);1!==o.readyState||s.length?s.push(t):o.send(t)}o.onopen=()=>{for(;s.length;)o.send(s.shift())}}();
