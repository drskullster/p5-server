!function(){"use strict";const e="__p5_server_serialization_:",t=[void 0,NaN,-1/0,1/0],n=new Object(null),r=window.onerror;window.onerror=function(e,t,n,o,i){return d("error",{type:"error",message:e,url:t,line:n,col:o,stack:i&&i.stack}),!!r&&r(e,t,n,o,i)},window.addEventListener("unhandledrejection",(e=>{const t=e.reason;d("error",{type:"unhandledRejection",message:t.message||String(t),stack:t.stack})}));const o=["clear","debug","error","info","log","warn"];function i(e){try{return JSON.stringify(e)}catch(t){if(t instanceof TypeError)return function(e,t){const n=new Set,r=new Map;return JSON.stringify(e,o),n.clear(),0===r.size?JSON.stringify(e,t):JSON.stringify({"$__p5_server:circular":e},i);function o(e,t){if(t&&("object"==typeof t||Array.isArray(t))){if(r.has(t))return;if(n.has(t))return void r.set(t,r.size);n.add(t)}return t}function i(e,o){if(o&&("object"==typeof o||Array.isArray(o))){if("$__p5_server:def"===e)return o;if(n.has(o))return{"$__p5_server:ref":r.get(o)};if(r.has(o))return n.add(o),{"$__p5_server:def":o}}return t?t(e,o):o}}(e);throw t}}Object.entries(console).forEach((([r,i])=>{o.includes(r)&&(n[r]=i.bind(console),console[r]=(...n)=>{i.apply(console,n);const o=n.map((e=>!e||"object"!=typeof e&&"function"!=typeof e||Array.isArray(e)||"function"!=typeof e.toString?null:e.toString()));d("console",Object.assign({method:r,args:n.map(((n,r)=>function(n,r){return t.includes(r)?e+r:r}(0,n))),argStrings:o},function(){const e=(new Error).stack;if(!e)return{};const t=e.match(/\bhttps?:\/\/.+?(:\d+)?\/([^\s)]+)/g);if(!t)return{stack:e};const n=/^https?:\/\/[^:/]+?(:\d+)?\/[^:]+/,r=t.shift().match(n)[0],o=t.find((e=>e.match(n)[0]!==r));if(!o)return{stack:e};const i=o.match(/(.+?):(\d+):(\d+)/);return i?{url:i[1],line:Number(i[2]),col:Number(i[3]),stack:e}:{url:o,stack:e}}()))})}));const s=new WebSocket("ws://"+window.location.host),c=[],a=Array.from(window.crypto.getRandomValues(new Uint32Array(2))).map((e=>e.toString(16))).join("-");function d(e,t){const n=i([e,Object.assign({clientId:a,url:document.documentURI,timestamp:+new Date},t)]);1!==s.readyState||c.length?c.push(n):s.send(n)}s.onopen=()=>{for(;c.length;)s.send(c.shift())},d("connection",{type:"opened"}),document.addEventListener("visibilitychange",(()=>{d("document",{type:"visibilitychange",visibilityState:document.visibilityState})})),window.addEventListener("DOMContentLoaded",(()=>{d("window",{type:"DOMContentLoaded"})})),window.addEventListener("load",(()=>{d("window",{type:"load"})})),window.addEventListener("pagehide",(()=>{d("window",{type:"pagehide"})}),!1)}();
