!function(){"use strict";const e="__p5_server_serialization_:",n=[void 0,NaN,-1/0,1/0],t=new Object(null),r=window.onerror;window.onerror=function(e,n,t,i,o){return d("error",{type:"error",message:e,url:n,line:t,col:i,stack:o&&o.stack}),!!r&&r(e,n,t,i,o)},window.addEventListener("unhandledrejection",(e=>{const n=e.reason;d("error",{type:"unhandledRejection",message:n.message||String(n),stack:n.stack})}));const i=["clear","debug","error","info","log","warn"];function o(e){try{return JSON.stringify(e)}catch(n){if(n instanceof TypeError)return function(e,n){const t=new Set,r=new Map;return JSON.stringify(e,i),t.clear(),0===r.size?JSON.stringify(e,n):JSON.stringify({"$__p5_server:circular":e},o);function i(e,n){if(n&&("object"==typeof n||Array.isArray(n))){if(r.has(n))return;if(t.has(n))return void r.set(n,r.size);t.add(n)}return n}function o(e,i){if(i&&("object"==typeof i||Array.isArray(i))){if("$__p5_server:def"===e)return i;if(t.has(i))return{"$__p5_server:ref":r.get(i)};if(r.has(i))return t.add(i),{"$__p5_server:def":i}}return n?n(e,i):i}}(e);throw n}}Object.entries(console).forEach((([r,o])=>{function s(...t){o.apply(console,t);const i=t.map((e=>!e||"object"!=typeof e&&"function"!=typeof e||Array.isArray(e)||"function"!=typeof e.toString?null:e.toString()));d("console",Object.assign({method:r,args:t.map(((t,r)=>function(t,r){return n.includes(r)?e+r:r}(0,t))),argStrings:i},function(){const e=(new Error).stack;if(!e)return{};const n=e.match(/\bhttps?:\/\/.+?(:\d+)?\/([^\s)]+)/g);if(!n)return{stack:e};const t=/^https?:\/\/[^:/]+?(:\d+)?\/[^:]+/,r=n.shift().match(t)[0],i=n.find((e=>e.match(t)[0]!==r));if(!i)return{stack:e};const o=i.match(/(.+?):(\d+):(\d+)/);return o?{url:o[1],line:Number(o[2]),col:Number(o[3]),stack:e}:{url:i,stack:e}}()))}i.includes(r)&&(t[r]=o.bind(console),console[r]=s,s.displayName=o.displayName,s.name=o.name,s.length=o.length)}));const s=new WebSocket("ws://"+window.location.host),a=[],c=Array.from(window.crypto.getRandomValues(new Uint32Array(2))).map((e=>e.toString(16))).join("-");function d(e,n){const t=o([e,Object.assign({clientId:c,url:document.documentURI,timestamp:+new Date},n)]);1!==s.readyState||a.length?a.push(t):s.send(t)}s.onopen=()=>{for(;a.length;)s.send(a.shift())},d("connection",{type:"opened"}),document.addEventListener("visibilitychange",(()=>{d("document",{type:"visibilitychange",visibilityState:document.visibilityState})})),window.addEventListener("DOMContentLoaded",(()=>{d("window",{type:"DOMContentLoaded"})})),window.addEventListener("load",(()=>{d("window",{type:"load"})})),window.addEventListener("pagehide",(()=>{d("window",{type:"pagehide"})}),!1)}();
